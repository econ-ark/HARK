
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Consumption-Saving model with Idiosyncratic Income Shocks and Different Interest Rates on Borrowing and Saving &#8212; HARK latest documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../../_static/override-nbsphinx-gallery.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=91d07486"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/ConsIndShockModel/KinkedRconsumerType';</script>
    <link rel="canonical" href="https://docs.econ-ark.org/examples/ConsIndShockModel/KinkedRconsumerType.html" />
    <link rel="icon" href="../../_static/econ-ark-logo.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Additional parameter value to solve an instance of MarkovConsumerType" href="../ConsMarkovModel/MarkovConsumerType.html" />
    <link rel="prev" title="Consumption-Saving model with Idiosyncratic Income Shocks" href="IndShockConsumerType.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="latest" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/econ-ark-logo.png" class="logo__image only-light" alt="HARK latest documentation - Home"/>
    <img src="../../_static/econ-ark-logo.png" class="logo__image only-dark pst-js-only" alt="HARK latest documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../docs/guides/index.html">
    Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../docs/overview/index.html">
    Overview & Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../docs/reference/index.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Econ-ARK/HARK" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/econ_ark" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/econ-ark/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://econ-ark.org" title="Econ-ARK" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/econ-ark-logo.png" class="icon-link-image" alt="Econ-ARK"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../docs/guides/index.html">
    Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../docs/overview/index.html">
    Overview & Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../docs/reference/index.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Econ-ARK/HARK" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/econ_ark" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/econ-ark/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://econ-ark.org" title="Econ-ARK" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/econ-ark-logo.png" class="icon-link-image" alt="Econ-ARK"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to HARK</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../docs/overview/introduction.html">Introduction to HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/overview/ARKitecture.html">ARKitecture of Econ-ARK</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Learning About HARK</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Gentle-Intro-To-HARK.html">A Gentle Introduction to HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Simulation-Intro.html">Simulating Microeconomic Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Cycles-Intro.html">The Nature of Time in HARK’s Microeconomic Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Constructors-Intro.html">Constructed Attributes and Model Defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Advanced-Intro.html">Advanced and Uncommon HARK Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Methods-Intro.html">Numeric Methods Commonly Used in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Model-List.html">Directory of Consumption-Saving Models in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/AgentType-Intro.html">Elements of an AgentType Subclass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Gentle-Intro/Market-Intro.html">Solving for “Macroeconomic” Equilibrium in HARK: the <code class="docutils literal notranslate"><span class="pre">Market</span></code> class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SequenceSpaceJacobians/SSJ_explanation.html">The Sequence Space Jacobian (SSJ) method</a></li>

<li class="toctree-l1"><a class="reference internal" href="../SequenceSpaceJacobians/SSJ-tutorial.html">Making Heterogeneous Agent Sequence Space Jacobian Matrices in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Journeys/Journey-PhD.html">Journey: Economics PhD Student</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">HARK Models</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="PerfForesightConsumerType.html">Perfect foresight consumption-saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="IndShockConsumerType.html">Consumption-Saving model with Idiosyncratic Income Shocks</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Consumption-Saving model with Idiosyncratic Income Shocks and Different Interest Rates on Borrowing and Saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsMarkovModel/MarkovConsumerType.html">Additional parameter value to solve an instance of MarkovConsumerType</a></li>





<li class="toctree-l1"><a class="reference internal" href="../ConsGenIncProcessModel/GenIncProcessConsumerType.html">Permanent versus Persistent Income Shocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsAggShockModel/AggShockConsumerType.html">Example ConsAggShockModel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsPortfolioModel/PortfolioConsumerType.html">Portfolio Models in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsPortfolioModel/RiskyAssetConsumerType.html">Example Implementations of <code class="docutils literal notranslate"><span class="pre">HARK.ConsumptionSaving.ConsRiskyAssetModel</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsPortfolioModel/SequentialPortfolioConsumerType.html">Consumption-Saving with Portfolio Allocation: Sequential Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsLaborModel/LaborIntMargConsumerType.html">Consumption-Saving with Intensive Margin Labor Supply Choice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsPrefShockModel/PrefShockConsumerType.html">Multiplicative Shocks to Utility</a></li>




<li class="toctree-l1"><a class="reference internal" href="../ConsHealthModel/BasicHealthConsumerType.html">Basic Health Investment in a Consumption-Saving Model</a></li>

<li class="toctree-l1"><a class="reference internal" href="../ConsMedModel/MedShockConsumerType.html">Medical Care as a Consumption Good with Stochastic Demand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsMedModel/MedExtMargConsumerType.html">Consumption-Saving with Medical Care Choice on the Extensive Margin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsRepAgentModel/RepAgentConsumerType.html">Representative Agent Consumption-Saving Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ConsRiskyContribModel/RiskyContribConsumerType.html">“Risky Contribution” Model (UNKNOWN / UNEXPLAINED)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../LifecycleModel/LifecycleModel.html">A Life Cycle Model: The Distribution of Assets By Age</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SequenceSpaceJacobians/Transition_Matrix_Example.html">Using Transition Matrix Methods under IndShockConsumerType</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SequenceSpaceJacobians/Jacobian_Example.html">Computing Heterogenous Agent Sequence Space Jacobians in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SequenceSpaceJacobians/KS-HARK-presentation.html">Solving Krusell Smith Model with HARK and SSJ</a></li>


<li class="toctree-l1"><a class="reference internal" href="../SequenceSpaceJacobians/HANKFiscal_example.html">HARK and the Sequence Space Jacobian (SSJ) Method</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../docs/CHANGELOG.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/license.html">License</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../docs/overview/index.html" class="nav-link">Overview</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Consumption-Saving model with Idiosyncratic Income Shocks and Different Interest Rates on Borrowing and Saving</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="admonition note">
  This page was generated from
  <a class="reference external" href="https://github.com/econ-ark/HARK/tree/master/examples/ConsIndShockModel/KinkedRconsumerType.ipynb">examples/ConsIndShockModel/KinkedRconsumerType.ipynb</a>.
  <br />
  Interactive online version:
  <span style="white-space: nowrap;"><a href="https://mybinder.org/v2/gh/econ-ark/HARK/master?filepath=examples/ConsIndShockModel/KinkedRconsumerType.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="vertical-align:text-bottom"></a>.</span>
  <a href="KinkedRconsumerType.ipynb" class="reference download internal" download>Download notebook</a>.
</div><section id="Consumption-Saving-model-with-Idiosyncratic-Income-Shocks-and-Different-Interest-Rates-on-Borrowing-and-Saving">
<h1>Consumption-Saving model with Idiosyncratic Income Shocks and Different Interest Rates on Borrowing and Saving<a class="headerlink" href="#Consumption-Saving-model-with-Idiosyncratic-Income-Shocks-and-Different-Interest-Rates-on-Borrowing-and-Saving" title="Link to this heading">#</a></h1>
<p><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code> <strong>class</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initial imports and notebook setup, click arrow to show</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">HARK.ConsumptionSaving.ConsIndShockModel</span><span class="w"> </span><span class="kn">import</span> <span class="n">KinkedRconsumerType</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">HARK.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot_funcs</span><span class="p">,</span> <span class="n">plot_funcs_der</span>

<span class="n">mystr</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">number</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<p>The module <code class="docutils literal notranslate"><span class="pre">HARK.ConsumptionSaving.ConsIndShockModel</span></code> concerns consumption-saving models with idiosyncratic shocks to (non-capital) income. All of the models assume CRRA utility with geometric discounting, no bequest motive, and income shocks are fully transitory or fully permanent.</p>
<p><code class="docutils literal notranslate"><span class="pre">ConsIndShockModel</span></code> currently includes three models:</p>
<ol class="arabic simple">
<li><p>A very basic “perfect foresight” model with no uncertainty.</p></li>
<li><p>A model with risk over transitory and permanent income shocks.</p></li>
<li><p>The model described in (2), with an interest rate for debt that differs from the interest rate for savings.</p></li>
</ol>
<p>This notebook provides documentation for the third of these models. <span class="math notranslate nohighlight">\(\newcommand{\CRRA}{\rho}\)</span> <span class="math notranslate nohighlight">\(\newcommand{\DiePrb}{\mathsf{D}}\)</span> <span class="math notranslate nohighlight">\(\newcommand{\PermGroFac}{\Gamma}\)</span> <span class="math notranslate nohighlight">\(\newcommand{\Rfree}{\mathsf{R}}\)</span> <span class="math notranslate nohighlight">\(\newcommand{\DiscFac}{\beta}\)</span></p>
<section id="Statement-of-%22kinked-R%22-model">
<h2>Statement of “kinked R” model<a class="headerlink" href="#Statement-of-%22kinked-R%22-model" title="Link to this heading">#</a></h2>
<p>Consider a small extension to the model faced by the <code class="docutils literal notranslate"><span class="pre">IndShockConsumerType</span></code>: that the interest rate on borrowing (<span class="math notranslate nohighlight">\(a_t &lt; 0\)</span>) is greater than the interest rate on saving (<span class="math notranslate nohighlight">\(a_t &gt; 0\)</span>). Consumers who face this kind of problem are represented by the <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code> class.</p>
<p>For a full theoretical treatment, this model analyzed in <a class="reference external" href="https://pubs.aeaweb.org/doi/pdfplus/10.1257/jep.15.3.23">A Theory of the Consumption Function, With and Without Liquidity Constraints</a> and its <a class="reference external" href="https://www.nber.org/system/files/working_papers/w8387/w8387.pdf">expanded edition</a>.</p>
<p>Continuing to work with <em>normalized</em> variables (e.g. <span class="math notranslate nohighlight">\(m_t\)</span> represents the level of market resources divided by permanent income), the “kinked R” model can be stated as:</p>
<p><span class="math">\begin{align*}
v_t(m_t) &= \max_{c_t} u(c_t) + \DiscFac (1-\DiePrb_{t+1})  \mathbb{E}_{t} \left[(\PermGroFac_{t+1}\psi_{t+1})^{1-\CRRA} v_{t+1}(m_{t+1}) \right], \\
a_t &= m_t - c_t, \\
a_t &\geq \underline{a}, \\
m_{t+1} &= \Rfree_t/(\PermGroFac_{t+1} \psi_{t+1}) a_t + \theta_{t+1}, \\
\Rfree_t &= \begin{cases}
\Rfree_{boro} & \text{if } a_t < 0\\
\Rfree_{save} & \text{if } a_t \geq 0,
\end{cases}\\
\Rfree_{boro} &> \Rfree_{save}, \\
(\psi_{t+1},\theta_{t+1}) &\sim F_{t+1}, \\
\mathbb{E}[\psi]=\mathbb{E}[\theta] &= 1.
\end{align*}</span></p>
</section>
<section id="Solving-the-%22kinked-R%22-model">
<h2>Solving the “kinked R” model<a class="headerlink" href="#Solving-the-%22kinked-R%22-model" title="Link to this heading">#</a></h2>
<p>The solution method for the “kinked R” model is nearly identical to that of the <code class="docutils literal notranslate"><span class="pre">IndShockConsumerType</span></code> on which it is based, using the endogenous grid method; see the notebook for that model for more information. The only significant difference is that the interest factor varies by <span class="math notranslate nohighlight">\(a_t\)</span> across the exogenously chosen grid of end-of-period assets, with a discontinuity in <span class="math notranslate nohighlight">\(\Rfree\)</span> at <span class="math notranslate nohighlight">\(a_t=0\)</span>.</p>
<p>To correctly handle this, the <code class="docutils literal notranslate"><span class="pre">solveConsKinkedR</span></code> function inserts <em>two</em> instances of <span class="math notranslate nohighlight">\(a_t=0\)</span> into the grid of <span class="math notranslate nohighlight">\(a_t\)</span> values: the first corresponding to <span class="math notranslate nohighlight">\(\Rfree_{boro}\)</span> (<span class="math notranslate nohighlight">\(a_t = -0\)</span>) and the other corresponding to <span class="math notranslate nohighlight">\(\Rfree_{save}\)</span> (<span class="math notranslate nohighlight">\(a_t = +0\)</span>). The two consumption levels (and corresponding endogenous <span class="math notranslate nohighlight">\(m_t\)</span> gridpoints) represent points at which the agent’s first order condition is satisfied at <em>exactly</em> <span class="math notranslate nohighlight">\(a_t=0\)</span> at the two different interest factors.
In between these two points, the first order condition <em>does not hold with equality</em>: the consumer will end the period with exactly <span class="math notranslate nohighlight">\(a_t=0\)</span>, consuming <span class="math notranslate nohighlight">\(c_t=m_t\)</span>, but his marginal utility of consumption exceeds the marginal value of saving and is less than the marginal value of borrowing. This generates a consumption function with <em>two</em> kinks: two concave portions (for borrowing and saving) with a linear segment of slope 1 in between.</p>
</section>
<section id="Example-parameter-values-to-construct-an-instance-of-KinkedRconsumerType">
<h2>Example parameter values to construct an instance of KinkedRconsumerType<a class="headerlink" href="#Example-parameter-values-to-construct-an-instance-of-KinkedRconsumerType" title="Link to this heading">#</a></h2>
<p>The parameters required to create an instance of <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code> are nearly identical to those for <code class="docutils literal notranslate"><span class="pre">IndShockConsumerType</span></code>. The only difference is that the parameter <span class="math notranslate nohighlight">\(\verb!Rfree!\)</span> is replaced with <span class="math notranslate nohighlight">\(\verb!Rboro!\)</span> and <span class="math notranslate nohighlight">\(\verb!Rsave!\)</span>.</p>
<p>While the parameter <span class="math notranslate nohighlight">\(\verb!CubicBool!\)</span> is required to create a valid <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code> instance, it must be set to <code class="docutils literal notranslate"><span class="pre">False</span></code>; cubic spline interpolation has not yet been implemented for this model. In the future, this restriction will be lifted.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Code</p></th>
<th class="head"><p>Example value</p></th>
<th class="head"><p>Time-varying?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\DiscFac\)</span></p></td>
<td><p>Intertemporal discount factor</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!DiscFac!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.96\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\CRRA\)</span></p></td>
<td><p>Coefficient of relative risk aversion</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!CRRA!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2.0\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\Rfree_{boro}\)</span></p></td>
<td><p>Risk free interest factor for borrowing</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!Rboro!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1.20\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\Rfree_{save}\)</span></p></td>
<td><p>Risk free interest factor for saving</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!Rsave!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1.01\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(1 - \DiePrb_{t+1}\)</span></p></td>
<td><p>Survival probability</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!LivPrb!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\([0.98]\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\surd\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\PermGroFac_{t+1}\)</span></p></td>
<td><p>Permanent income growth factor</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!PermGroFac!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\([1.01]\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\surd\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\sigma_\psi\)</span></p></td>
<td><p>Standard deviation of log permanent income shocks</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!PermShkStd!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\([0.1]\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\surd\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_\psi\)</span></p></td>
<td><p>Number of discrete permanent income shocks</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!PermShkCount!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(7\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\sigma_\theta\)</span></p></td>
<td><p>Standard deviation of log transitory income shocks</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!TranShkStd!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\([0.2]\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\surd\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_\theta\)</span></p></td>
<td><p>Number of discrete transitory income shocks</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!TranShkCount!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(7\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\mho\)</span></p></td>
<td><p>Probability of being unemployed and getting <span class="math notranslate nohighlight">\(\theta=\underline{\theta}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!UnempPrb!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.05\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\underline{\theta}\)</span></p></td>
<td><p>Transitory shock when unemployed</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!IncUnemp!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.3\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\mho^{Ret}\)</span></p></td>
<td><p>Probability of being “unemployed” when retired</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!UnempPrbRet!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.0005\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\underline{\theta}^{Ret}\)</span></p></td>
<td><p>Transitory shock when “unemployed” and retired</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!IncUnempRet!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.0\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Period of the lifecycle model when retirement begins</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!T_retire!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Minimum value in assets-above-minimum grid</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aXtraMin!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.001\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Maximum value in assets-above-minimum grid</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aXtraMax!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(20.0\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Number of points in base assets-above-minimum grid</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aXtraCount!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(48\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Exponential nesting factor for base assets-above-minimum grid</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aXtraNestFac!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(3\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Additional values to add to assets-above-minimum grid</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aXtraExtra!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(None\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\underline{a}\)</span></p></td>
<td><p>Artificial borrowing constraint (normalized)</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!BoroCnstArt!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(None\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Indicator for whether <span class="math notranslate nohighlight">\(\verb!vFunc!\)</span> should be computed</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!vFuncBool!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(True\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Indicator for whether <span class="math notranslate nohighlight">\(\verb!cFunc!\)</span> should use cubic splines</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!CubicBool!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(False\)</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(T\)</span></p></td>
<td><p>Number of periods in this type’s “cycle”</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!T_cycle!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\((none)\)</span></p></td>
<td><p>Number of times the “cycle” occurs</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!cycles!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>These example parameters are almost identical to those used for <code class="docutils literal notranslate"><span class="pre">IndShockExample</span></code> in the prior notebook, except that the interest rate on borrowing is 20% (like a credit card), and the interest rate on saving is 1%. Moreover, the artificial borrowing constraint has been set to <code class="docutils literal notranslate"><span class="pre">None</span></code>. The cell below defines a parameter dictionary with these example values.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KinkedRdict</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># Click the arrow to expand this parameter dictionary</span>
    <span class="c1"># Parameters shared with the perfect foresight model</span>
    <span class="s2">&quot;CRRA&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>  <span class="c1"># Coefficient of relative risk aversion</span>
    <span class="s2">&quot;DiscFac&quot;</span><span class="p">:</span> <span class="mf">0.96</span><span class="p">,</span>  <span class="c1"># Intertemporal discount factor</span>
    <span class="s2">&quot;LivPrb&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.98</span><span class="p">],</span>  <span class="c1"># Survival probability</span>
    <span class="s2">&quot;PermGroFac&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.01</span><span class="p">],</span>  <span class="c1"># Permanent income growth factor</span>
    <span class="s2">&quot;BoroCnstArt&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Artificial borrowing constraint; imposed minimum level of end-of period assets</span>
    <span class="c1"># New parameters unique to the &quot;kinked R&quot; model</span>
    <span class="s2">&quot;Rboro&quot;</span><span class="p">:</span> <span class="mf">1.20</span><span class="p">,</span>  <span class="c1"># Interest factor on borrowing (a &lt; 0)</span>
    <span class="s2">&quot;Rsave&quot;</span><span class="p">:</span> <span class="mf">1.01</span><span class="p">,</span>  <span class="c1"># Interest factor on saving (a &gt; 0)</span>
    <span class="c1"># Parameters that specify the income distribution over the lifecycle (shared with IndShockConsumerType)</span>
    <span class="s2">&quot;PermShkStd&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">],</span>  <span class="c1"># Standard deviation of log permanent shocks to income</span>
    <span class="s2">&quot;PermShkCount&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>  <span class="c1"># Number of points in discrete approximation to permanent income shocks</span>
    <span class="s2">&quot;TranShkStd&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">],</span>  <span class="c1"># Standard deviation of log transitory shocks to income</span>
    <span class="s2">&quot;TranShkCount&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>  <span class="c1"># Number of points in discrete approximation to transitory income shocks</span>
    <span class="s2">&quot;UnempPrb&quot;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>  <span class="c1"># Probability of unemployment while working</span>
    <span class="s2">&quot;IncUnemp&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>  <span class="c1"># Unemployment benefits replacement rate</span>
    <span class="s2">&quot;UnempPrbRet&quot;</span><span class="p">:</span> <span class="mf">0.0005</span><span class="p">,</span>  <span class="c1"># Probability of &quot;unemployment&quot; while retired</span>
    <span class="s2">&quot;IncUnempRet&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># &quot;Unemployment&quot; benefits when retired</span>
    <span class="s2">&quot;T_retire&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># Period of retirement (0 --&gt; no retirement)</span>
    <span class="s2">&quot;tax_rate&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># Flat income tax rate (legacy parameter, will be removed in future)</span>
    <span class="c1"># Parameters for constructing the &quot;assets above minimum&quot; grid (shared with IndShockConsumerType)</span>
    <span class="s2">&quot;aXtraMin&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>  <span class="c1"># Minimum end-of-period &quot;assets above minimum&quot; value</span>
    <span class="s2">&quot;aXtraMax&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>  <span class="c1"># Maximum end-of-period &quot;assets above minimum&quot; value</span>
    <span class="s2">&quot;aXtraCount&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>  <span class="c1"># Number of points in the base grid of &quot;assets above minimum&quot;</span>
    <span class="s2">&quot;aXtraNestFac&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>  <span class="c1"># Exponential nesting factor when constructing &quot;assets above minimum&quot; grid</span>
    <span class="s2">&quot;aXtraExtra&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Additional values to add to aXtraGrid</span>
    <span class="c1"># A few other parameters (shared with IndShockConsumerType)</span>
    <span class="s2">&quot;vFuncBool&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Whether to calculate the value function during solution</span>
    <span class="s2">&quot;CubicBool&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Preference shocks currently only compatible with linear cFunc</span>
    <span class="s2">&quot;T_cycle&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Number of periods in the cycle for this agent type</span>
    <span class="c1"># Parameters only used in simulation (shared with PerfForesightConsumerType)</span>
    <span class="s2">&quot;AgentCount&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>  <span class="c1"># Number of agents of this type</span>
    <span class="s2">&quot;T_sim&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="c1"># Number of periods to simulate</span>
    <span class="s2">&quot;kLogInitMean&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">6.0</span><span class="p">,</span>  <span class="c1"># Mean of log initial assets</span>
    <span class="s2">&quot;kLogInitStd&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>  <span class="c1"># Standard deviation of log initial assets</span>
    <span class="s2">&quot;pLogInitMean&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># Mean of log initial permanent income</span>
    <span class="s2">&quot;pLogInitStd&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># Standard deviation of log initial permanent income</span>
    <span class="s2">&quot;PermGroFacAgg&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>  <span class="c1"># Aggregate permanent income growth factor</span>
    <span class="s2">&quot;T_age&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Age after which simulated agents are automatically killed</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="Solving-and-examining-the-solution-of-the-%22kinked-R%22-model">
<h2>Solving and examining the solution of the “kinked R” model<a class="headerlink" href="#Solving-and-examining-the-solution-of-the-%22kinked-R%22-model" title="Link to this heading">#</a></h2>
<p>The cell below creates an infinite horizon instance of <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code> and solves its model by calling its <code class="docutils literal notranslate"><span class="pre">solve</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KinkyExample</span> <span class="o">=</span> <span class="n">KinkedRconsumerType</span><span class="p">(</span><span class="o">**</span><span class="n">KinkedRdict</span><span class="p">)</span>
<span class="n">KinkyExample</span><span class="o">.</span><span class="n">cycles</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Make the example infinite horizon</span>
<span class="n">KinkyExample</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
The calc_limiting_values method must be run before the calc_stable_points method.
</pre></div></div>
</div>
<p>An element of a <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code>’s solution will have all the same attributes as that of a <code class="docutils literal notranslate"><span class="pre">IndShockConsumerType</span></code>; see that notebook for details.</p>
<p>We can plot the consumption function of our “kinked R” example, as well as the MPC:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Kinked R consumption function:&quot;</span><span class="p">)</span>
<span class="n">plot_funcs</span><span class="p">(</span><span class="n">KinkyExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">,</span> <span class="n">KinkyExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mNrmMin</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Kinked R marginal propensity to consume:&quot;</span><span class="p">)</span>
<span class="n">plot_funcs_der</span><span class="p">(</span><span class="n">KinkyExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">,</span> <span class="n">KinkyExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mNrmMin</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Kinked R consumption function:
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_10_1.png" src="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_10_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Kinked R marginal propensity to consume:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_10_3.png" src="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_10_3.png" />
</div>
</div>
</section>
<section id="Simulating-the-%22kinked-R%22-model">
<h2>Simulating the “kinked R” model<a class="headerlink" href="#Simulating-the-%22kinked-R%22-model" title="Link to this heading">#</a></h2>
<p>In order to generate simulated data, an instance of <code class="docutils literal notranslate"><span class="pre">KinkedRconsumerType</span></code> needs to know how many agents there are that share these particular parameters (and are thus <em>ex ante</em> homogeneous), the distribution of states for newly “born” agents, and how many periods to simulated. These simulation parameters are described in the table below, along with example values.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>Code</p></th>
<th class="head"><p>Example value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of consumers of this type</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!AgentCount!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(10000\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Number of periods to simulate</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!T_sim!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(500\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Mean of initial log (normalized) assets</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aNrmInitMean!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(-6.0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Stdev of initial log (normalized) assets</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!aNrmInitStd!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1.0\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Mean of initial log permanent income</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!pLvlInitMean!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Stdev of initial log permanent income</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!pLvlInitStd!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0.0\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Aggregrate productivity growth factor</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!PermGroFacAgg!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1.0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Age after which consumers are automatically killed</p></td>
<td><p><span class="math notranslate nohighlight">\(\verb!T_age!\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(None\)</span></p></td>
</tr>
</tbody>
</table>
</div>
<p>Here, we will simulate 10,000 consumers for 500 periods. All newly born agents will start with permanent income of exactly <span class="math notranslate nohighlight">\(P_t = 1.0 = \exp(\verb!pLvlInitMean!)\)</span>, as <span class="math notranslate nohighlight">\(\verb!pLvlInitStd!\)</span> has been set to zero; they will have essentially zero assets at birth, as <span class="math notranslate nohighlight">\(\verb!aNrmInitMean!\)</span> is <span class="math notranslate nohighlight">\(-6.0\)</span>; assets will be less than <span class="math notranslate nohighlight">\(1\%\)</span> of permanent income at birth.</p>
<p>These example parameter values were already passed as part of the parameter dictionary that we used to create <code class="docutils literal notranslate"><span class="pre">KinkyExample</span></code>, so it is ready to simulate. We need to set the <code class="docutils literal notranslate"><span class="pre">track_vars</span></code> attribute to indicate the variables for which we want to record a <em>history</em>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KinkyExample</span><span class="o">.</span><span class="n">track_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mNrm&quot;</span><span class="p">,</span> <span class="s2">&quot;cNrm&quot;</span><span class="p">,</span> <span class="s2">&quot;pLvl&quot;</span><span class="p">]</span>
<span class="n">KinkyExample</span><span class="o">.</span><span class="n">initialize_sim</span><span class="p">()</span>
<span class="n">KinkyExample</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;mNrm&#39;: array([[ 1.0011068 ,  1.00256882,  1.00101819, ...,  1.00156301,
          1.0003737 ,  1.00516688],
        [ 1.05541172,  1.24364019,  0.35325187, ...,  1.44916311,
          1.14101133,  0.79232874],
        [ 1.04454599,  1.01089495, -0.12266971, ...,  1.15389701,
          1.08795268,  0.81155032],
        ...,
        [ 0.94584825,  1.27766769,  1.81605935, ...,  0.70862776,
          0.57715925,  1.51861495],
        [ 1.19825465,  1.32998498,  2.09897862, ...,  0.80801571,
          0.96687507,  1.61109117],
        [ 0.52495288,  1.36898553,  1.81975329, ...,  1.05192278,
          1.1163099 ,  1.71343907]]),
 &#39;cNrm&#39;: array([[0.95575478, 0.95614394, 0.95573119, ..., 0.95587621, 0.95555964,
         0.9568355 ],
        [0.97020975, 1.01645863, 0.70724361, ..., 1.05580478, 0.99276336,
         0.84001699],
        [0.96731749, 0.9583602 , 0.51853659, ..., 0.99615385, 0.97880253,
         0.84591041],
        ...,
        [0.94072175, 1.0235892 , 1.11996143, ..., 0.81404498, 0.77373932,
         1.06803332],
        [1.00694793, 1.03386482, 1.16209389, ..., 0.84482668, 0.94664292,
         1.08454428],
        [0.75797377, 1.04111067, 1.12056273, ..., 0.96928106, 0.9862639 ,
         1.10309844]]),
 &#39;pLvl&#39;: array([[0.85893446, 1.08875607, 1.08875607, ..., 1.17807023, 1.17807023,
         0.85893446],
        [1.01188512, 1.01015813, 0.93517011, ..., 1.09302465, 1.14116783,
         0.86324343],
        [0.869143  , 0.86765963, 0.93986152, ..., 1.05878626, 1.18993864,
         0.90013641],
        ...,
        [0.96746751, 0.91267336, 0.48656521, ..., 0.58611995, 0.63318207,
         2.49213392],
        [0.97232095, 0.99367866, 0.48900614, ..., 0.54380761, 0.66024277,
         2.71332592],
        [0.83515997, 1.08187367, 0.57608357, ..., 0.56704866, 0.61257946,
         2.33056914]])}
</pre></div></div>
</div>
<p>We can plot the average (normalized) market resources in each simulated period:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">KinkyExample</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="s2">&quot;mNrm&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Mean market resources&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_14_0.png" src="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_14_0.png" />
</div>
</div>
<p>Now let’s plot the distribution of (normalized) assets <span class="math notranslate nohighlight">\(a_t\)</span> for the current population, after simulating for <span class="math notranslate nohighlight">\(500\)</span> periods; this should be fairly close to the long run distribution:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">KinkyExample</span><span class="o">.</span><span class="n">state_now</span><span class="p">[</span><span class="s2">&quot;aNrm&quot;</span><span class="p">]),</span>
    <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">KinkyExample</span><span class="o">.</span><span class="n">AgentCount</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;End-of-period assets&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative distribution&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_16_0.png" src="../../_images/examples_ConsIndShockModel_KinkedRconsumerType_16_0.png" />
</div>
</div>
<p>We can see there’s a significant point mass of consumers with <em>exactly</em> <span class="math notranslate nohighlight">\(a_t=0\)</span>; these are consumers who do not find it worthwhile to give up a bit of consumption to begin saving (because <span class="math notranslate nohighlight">\(\Rfree_{save}\)</span> is too low), and also are not willing to finance additional consumption by borrowing (because <span class="math notranslate nohighlight">\(\Rfree_{boro}\)</span> is too high).</p>
<p>The smaller point masses in this distribution are due to <span class="math notranslate nohighlight">\(\verb!HARK!\)</span> drawing simulated income shocks from the discretized distribution, rather than the “true” lognormal distributions of shocks. For consumers who ended <span class="math notranslate nohighlight">\(t-1\)</span> with <span class="math notranslate nohighlight">\(a_{t-1}=0\)</span> in assets, there are only 8 values the transitory shock <span class="math notranslate nohighlight">\(\theta_{t}\)</span> can take on, and thus only 8 values of <span class="math notranslate nohighlight">\(m_t\)</span> thus <span class="math notranslate nohighlight">\(a_t\)</span> they can achieve; the value of <span class="math notranslate nohighlight">\(\psi_t\)</span> is immaterial to <span class="math notranslate nohighlight">\(m_t\)</span> when
<span class="math notranslate nohighlight">\(a_{t-1}=0\)</span>. You can verify this by changing <span class="math notranslate nohighlight">\(\verb!TranShkCount!\)</span> to some higher value, like 25, in the dictionary above, then running the subsequent cells; the smaller point masses will not be visible to the naked eye.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="IndShockConsumerType.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Consumption-Saving model with Idiosyncratic Income Shocks</p>
      </div>
    </a>
    <a class="right-next"
       href="../ConsMarkovModel/MarkovConsumerType.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Additional parameter value to solve an instance of MarkovConsumerType</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Statement-of-%22kinked-R%22-model">Statement of “kinked R” model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Solving-the-%22kinked-R%22-model">Solving the “kinked R” model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Example-parameter-values-to-construct-an-instance-of-KinkedRconsumerType">Example parameter values to construct an instance of KinkedRconsumerType</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Solving-and-examining-the-solution-of-the-%22kinked-R%22-model">Solving and examining the solution of the “kinked R” model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Simulating-the-%22kinked-R%22-model">Simulating the “kinked R” model</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Econ-ARK team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>