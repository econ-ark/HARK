<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HARKparallel module &mdash; HARK 0.97 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.97',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="HARK 0.97 documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HARK 0.97 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-HARKparallel">
<span id="harkparallel-module"></span><h1>HARKparallel module<a class="headerlink" href="#module-HARKparallel" title="Permalink to this headline">¶</a></h1>
<p>Early version of multithreading in HARK. To use this module, first install dill
and joblib.  Packages can be installed by typing &#8220;conda install dill&#8221; (etc) at
a command prompt.</p>
<dl class="function">
<dt id="HARKparallel.loadNelderMeadData">
<code class="descclassname">HARKparallel.</code><code class="descname">loadNelderMeadData</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.loadNelderMeadData" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the progress of a parallel Nelder-Mead search from a text file, as
created by saveNelderMeadData().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : string</p>
<blockquote>
<div><p>Name of the txt file from which to read search progress.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>simplex</strong> : np.array</p>
<blockquote>
<div><p>The current state of the simplex of parameter guesses.</p>
</div></blockquote>
<p><strong>fvals</strong> : np.array</p>
<blockquote>
<div><p>The objective function value at each row of simplex.</p>
</div></blockquote>
<p><strong>iters</strong> : int</p>
<blockquote>
<div><p>The number of completed Nelder-Mead iterations.</p>
</div></blockquote>
<p><strong>evals</strong> : int</p>
<blockquote class="last">
<div><p>The cumulative number of function evaluations in the search process.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="HARKparallel.multiThreadCommands">
<code class="descclassname">HARKparallel.</code><code class="descname">multiThreadCommands</code><span class="sig-paren">(</span><em>agent_list</em>, <em>command_list</em>, <em>num_jobs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.multiThreadCommands" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the list of commands in command_list for each AgentType in agent_list
using a multithreaded system. Each command should be a method of that AgentType subclass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>agent_list</strong> : [AgentType]</p>
<blockquote>
<div><p>A list of instances of AgentType on which the commands will be run.</p>
</div></blockquote>
<p><strong>command_list</strong> : [string]</p>
<blockquote>
<div><p>A list of commands to run for each AgentType in agent_list.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">none</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="HARKparallel.multiThreadCommandsFake">
<code class="descclassname">HARKparallel.</code><code class="descname">multiThreadCommandsFake</code><span class="sig-paren">(</span><em>agent_list</em>, <em>command_list</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.multiThreadCommandsFake" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the list of commands in command_list for each AgentType in agent_list
in an ordinary, single-threaded loop.  Each command should be a method of
that AgentType subclass.  This function exists so as to easily disable
multithreading, as it uses the same syntax as multithreadCommands.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>agent_list</strong> : [AgentType]</p>
<blockquote>
<div><p>A list of instances of AgentType on which the commands will be run.</p>
</div></blockquote>
<p><strong>command_list</strong> : [string]</p>
<blockquote>
<div><p>A list of commands to run for each AgentType.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">none</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="HARKparallel.parallelNelderMead">
<code class="descclassname">HARKparallel.</code><code class="descname">parallelNelderMead</code><span class="sig-paren">(</span><em>objFunc</em>, <em>guess</em>, <em>perturb=None</em>, <em>P=1</em>, <em>ftol=1e-06</em>, <em>xtol=1e-08</em>, <em>maxiter=inf</em>, <em>maxeval=inf</em>, <em>r_param=1.0</em>, <em>e_param=1.0</em>, <em>c_param=0.5</em>, <em>s_param=0.5</em>, <em>maxcores=None</em>, <em>name=None</em>, <em>resume=False</em>, <em>savefreq=None</em>, <em>verbose=1</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.parallelNelderMead" title="Permalink to this definition">¶</a></dt>
<dd><p>A parallel implementation of the Nelder-Mead minimization algorithm, as
described in Lee and Wiswall.  For long optimization procedures, it can
save progress between iterations and resume later.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>objFunc</strong> : function</p>
<blockquote>
<div><p>The objective function to be minimized. Takes a single 1D array as input.</p>
</div></blockquote>
<p><strong>guess</strong> : np.array</p>
<blockquote>
<div><p>Initial starting point for the simplex, representing an input for objFunc.</p>
</div></blockquote>
<p><strong>perturb</strong> : np.array</p>
<blockquote>
<div><p>Perturbation vector for the simplex, of the same length as an input to
objFunc.  If perturb[j] is non-zero, a simplex point will be created
that perturbs the j-th element of guess by perturb[j]; if it is zero,
then the j-th parameter of objFunc will not be optimized over.  By
default, guess=None, indicating that all parameters should be optimized,
with an initial perturbation of 0.1*guess.</p>
</div></blockquote>
<p><strong>P</strong> : int</p>
<blockquote>
<div><p>Degree of parallelization: the number of vertices of the simplex to try
to update on each iteration of the process.</p>
</div></blockquote>
<p><strong>ftol</strong> : float</p>
<blockquote>
<div><p>Absolute tolerance of the objective function for convergence.  If suc-
cessive iterations return minimum function values that differ by less
than ftol, the process terminates successfully.</p>
</div></blockquote>
<p><strong>xtol</strong> : float</p>
<blockquote>
<div><p>Absolute tolerance of the input values for convergence.  If the maximum
distance between the current minimum point and the worst point in the
simplex is less than xtol, then the process terminates successfully.</p>
</div></blockquote>
<p><strong>maxiter</strong> : int</p>
<blockquote>
<div><p>Maximum number of Nelder-Mead iterations; reaching iters=maxiter is
reported as an &#8220;unsuccessful&#8221; minimization.</p>
</div></blockquote>
<p><strong>maxeval</strong> : int</p>
<blockquote>
<div><p>Maximum number of evaluations of objFunc (across all processes); reaching
evals=maxeval is reported as an &#8220;unsuccessful&#8221; minimization.</p>
</div></blockquote>
<p><strong>r_param: float</strong></p>
<blockquote>
<div><p>Parameter indicating magnitude of the reflection point calculation.</p>
</div></blockquote>
<p><strong>e_param: float</strong></p>
<blockquote>
<div><p>Parameter indicating magnitude of the expansion point calculation.</p>
</div></blockquote>
<p><strong>c_param: float</strong></p>
<blockquote>
<div><p>Parameter indicating magnitude of the contraction point calculation.</p>
</div></blockquote>
<p><strong>s_param: float</strong></p>
<blockquote>
<div><p>Parameter indicating magnitude of the shrink calculation.</p>
</div></blockquote>
<p><strong>maxcores</strong> : int</p>
<blockquote>
<div><p>The maximum number of CPU cores that the optimization should use,
regardless of the size of the problem.</p>
</div></blockquote>
<p><strong>name</strong> : string</p>
<blockquote>
<div><p>A filename for (optionally) saving the progress of the Nelder-Mead search,
and for resuming a previous search (when resume=True).  Useful for long
searches that could potentially be interrupted by computer down time.</p>
</div></blockquote>
<p><strong>resume</strong> : boolean</p>
<blockquote>
<div><p>An indicator for whether the search should resume from earlier progress.
When True, the process will load a progress file named in input name.</p>
</div></blockquote>
<p><strong>savefreq</strong> : int</p>
<blockquote>
<div><p>When not None, search progress will be saved to name.txt every savefreq
iterations, to be loaded later with resume=True).</p>
</div></blockquote>
<p><strong>verbose</strong> : int</p>
<blockquote>
<div><p>Indicator for the verbosity of the optimization routine.  Higher values
generate more text output; verbose=0 produces no text output.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>min_point</strong> : np.array</p>
<blockquote>
<div><p>The input that minimizes objFunc, as found by the minimization.</p>
</div></blockquote>
<p><strong>fmin</strong> : float</p>
<blockquote class="last">
<div><p>The minimum of objFunc; fmin = objFunc(min_point).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="HARKparallel.parallelNelderMeadWorker">
<code class="descclassname">HARKparallel.</code><code class="descname">parallelNelderMeadWorker</code><span class="sig-paren">(</span><em>objFunc</em>, <em>simplex</em>, <em>f_vals</em>, <em>j</em>, <em>P</em>, <em>opt_params</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.parallelNelderMeadWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>A worker process for the parallel Nelder-Mead algorithm.  Updates one point
in the simplex, returning its function value as well.  Should basically
never be called directly, only by parallelNelderMead().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>objFunc</strong> : function</p>
<blockquote>
<div><p>The function to be minimized; takes a single 1D array as input.</p>
</div></blockquote>
<p><strong>simplex</strong> : numpy.array</p>
<blockquote>
<div><p>The current simplex for minimization; simplex[k,:] is an input for objFunc.</p>
</div></blockquote>
<p><strong>f_vals</strong> : numpy.array</p>
<blockquote>
<div><p>The values of the objective function at each point of the simplex:
f_vals[k] = objFunc(simplex[k,:])</p>
</div></blockquote>
<p><strong>j</strong> : int</p>
<blockquote>
<div><p>Index of the point in the simplex to update: simplex[j,:]</p>
</div></blockquote>
<p><strong>P</strong> : int</p>
<blockquote>
<div><p>Degree of parallelization of the algorithm.</p>
</div></blockquote>
<p><strong>opt_params</strong> : numpy.array</p>
<blockquote>
<div><p>Three element array with parameters for reflection, contraction, expansion.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_point</strong> : numpy.array</p>
<blockquote>
<div><p>An updated point for the simplex; might be the same as simplex[j,:].</p>
</div></blockquote>
<p><strong>new_val</strong> : float</p>
<blockquote>
<div><p>The value of the objective function at the new point: objFunc(new_point).</p>
</div></blockquote>
<p><strong>evals</strong> : int</p>
<blockquote class="last">
<div><p>Number of evaluations of objFunc by this worker.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="HARKparallel.runCommands">
<code class="descclassname">HARKparallel.</code><code class="descname">runCommands</code><span class="sig-paren">(</span><em>agent</em>, <em>command_list</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.runCommands" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes each command in command_list on a given AgentType.  The commands
should be methods of that AgentType&#8217;s subclass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>agent</strong> : AgentType</p>
<blockquote>
<div><p>An instance of AgentType on which the commands will be run.</p>
</div></blockquote>
<p><strong>command_list</strong> : [string]</p>
<blockquote>
<div><p>A list of commands that the agent should run, as methods.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>agent</strong> : AgentType</p>
<blockquote class="last">
<div><p>The same AgentType instance passed as input, after running the commands.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="HARKparallel.saveNelderMeadData">
<code class="descclassname">HARKparallel.</code><code class="descname">saveNelderMeadData</code><span class="sig-paren">(</span><em>name</em>, <em>simplex</em>, <em>fvals</em>, <em>iters</em>, <em>evals</em><span class="sig-paren">)</span><a class="headerlink" href="#HARKparallel.saveNelderMeadData" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the progress of a parallel Nelder-Mead search in a text file so that
it can be resumed later (after manual termination or a crash).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : string</p>
<blockquote>
<div><p>Name of the txt file in which to store search progress.</p>
</div></blockquote>
<p><strong>simplex</strong> : np.array</p>
<blockquote>
<div><p>The current state of the simplex of parameter guesses.</p>
</div></blockquote>
<p><strong>fvals</strong> : np.array</p>
<blockquote>
<div><p>The objective function value at each row of simplex.</p>
</div></blockquote>
<p><strong>iters</strong> : int</p>
<blockquote>
<div><p>The number of completed Nelder-Mead iterations.</p>
</div></blockquote>
<p><strong>evals</strong> : int</p>
<blockquote>
<div><p>The cumulative number of function evaluations in the search process.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">none</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/HARKparallel.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HARK 0.97 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Christopher D. Carroll, Alexander M. Kaufman, David C. Low, Nathan M. Palmer, Matthew N. White.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>