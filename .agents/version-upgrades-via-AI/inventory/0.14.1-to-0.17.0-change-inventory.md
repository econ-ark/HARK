# Change Inventory: HARK 0.14.1 → 0.17.0

## Discovery Metadata
- Generated: 2026-01-15 (Regenerated with method removal checks)
- Source version: 0.14.1
- Target version: 0.17.0
- Discovery method: PyPI wheel extraction + structural/API diff + method removal analysis
- Modules skipped (import errors): None

---

## Summary Statistics

| Category | Count |
|----------|-------|
| Module/path changes | 3 |
| Module removals | 3 |
| Parameter renames | 4 |
| **Method removals** | **4** |
| Type changes | 0 |
| Method renames in HARK | 0 (already snake_case in 0.14.1) |
| Config file types to check | 5+ |
| **Total breaking changes** | **14+** |

---

## 1. Module/Import Path Changes

### 1.1 Module Renames

| Old Import | New Import | Confidence | Evidence |
|------------|------------|------------|----------|
| `from HARK.distribution import` | `from HARK.distributions import` | HIGH | `diff -rq`: distribution.py → distributions/ |
| `from HARK.parallel import` | `from HARK.core import` | HIGH | parallel.py removed; functions in core.py |
| `from HARK.datasets import` | `from HARK.Calibration import` | HIGH | datasets/ → Calibration/ |

### 1.2 Removed Modules (No Direct Replacement)

| Module | Status | Notes |
|--------|--------|-------|
| `HARK.frame` | REMOVED | No replacement |
| `HARK.parallel` | MOVED | Functions moved to `HARK.core` |
| `HARK.ConsumptionSaving.ConsPortfolioFrameModel` | REMOVED | No replacement |

### 1.3 Specific Import Transformations

```python
# OLD (0.14.1)
from HARK.distribution import DiscreteDistribution, Uniform, MarkovProcess
from HARK.parallel import multi_thread_commands
from HARK.datasets.load_data import load_SCF_wealth_weights

# NEW (0.17.0)
from HARK.distributions import DiscreteDistribution, Uniform, MarkovProcess
from HARK.core import multi_thread_commands
from HARK.Calibration.load_data import load_SCF_wealth_weights
```

---

## 2. Parameter Renames (Model-Specific)

### 2.1 IndShockConsumerType Family Parameter Renames

| Old Parameter | New Parameter | Models Affected | Evidence |
|---------------|---------------|-----------------|----------|
| `aNrmInitMean` | `kLogInitMean` | IndShockConsumerType, KinkedRconsumerType, MarkovConsumerType | ConsIndShockModel.py diff |
| `aNrmInitStd` | `kLogInitStd` | Same | ConsIndShockModel.py diff |
| `pLvlInitMean` | `pLogInitMean` | Same | ConsIndShockModel.py diff |
| `pLvlInitStd` | `pLogInitStd` | Same | ConsIndShockModel.py diff |

---

## 3. Method Removals (CRITICAL - NEW SECTION)

### 3.1 `update_solution_terminal` Method Removed

**Status**: REMOVED from all classes. Replaced with standalone functions.

| Class | Old Method | New Function | Evidence |
|-------|------------|--------------|----------|
| `AggShockConsumerType` | `update_solution_terminal(self)` | `make_aggshock_solution_terminal(CRRA)` | Line 182 in 0.14.1, not present in 0.17.0 |
| `AggShockMarkovConsumerType` | `update_solution_terminal(self)` | `make_aggmrkv_solution_terminal(CRRA, MrkvArray)` | Line 535 in 0.14.1 |
| `MarkovConsumerType` | `update_solution_terminal(self)` | `make_markov_solution_terminal(CRRA, MrkvArray)` | Line 931 in 0.14.1 |
| `KrusellSmithType` | `update_solution_terminal(self)` | `make_solution_terminal_KS(CRRA)` | Line 787 in 0.14.1 |

### 3.2 Architectural Change

HARK 0.17.0 moved from instance methods to a **constructor-dict pattern**:

```python
# 0.17.0 uses constructor dicts instead of methods
aggshock_constructor_dict = {
    "solution_terminal": make_aggshock_solution_terminal,
    ...
}
```

### 3.3 Migration Pattern

```python
# OLD (0.14.1)
AggShockConsumerType.update_solution_terminal(self)

# NEW (0.17.0)
from HARK.ConsumptionSaving.ConsAggShockModel import make_aggshock_solution_terminal
self.solution_terminal = make_aggshock_solution_terminal(self.CRRA)
```

---

## 4. Target Codebase Compliance (camelCase → snake_case)

### 4.1 Status

HARK has used snake_case for lifecycle methods since at least 0.14.1. However, **target codebases may have legacy camelCase method definitions** that were never correct.

### 4.2 Required snake_case Method Names

These are the names HARK calls. User code MUST define them with these exact names:

| snake_case (REQUIRED) | camelCase (WRONG) |
|-----------------------|-------------------|
| `pre_solve` | `preSolve` |
| `post_solve` | `postSolve` |
| `initialize_sim` | `initializeSim` |
| `sim_birth` | `simBirth` |
| `sim_death` | `simDeath` |
| `get_shocks` | `getShocks` |
| `get_states` | `getStates` |
| `get_controls` | `getControls` |
| `get_poststates` | `getPostStates` |
| `get_mortality` | `getMortality` |
| `get_economy_data` | `getEconomyData` |
| `market_action` | `marketAction` |
| `save_state` | `saveState` |
| `restore_state` | `restoreState` |
| `make_shock_history` | `makeShockHistory` |
| `make_idiosyncratic_shock_histories` | `makeIdiosyncraticShockHistories` |
| `calc_age_distribution` | `calcAgeDistribution` |
| `initialize_ages` | `initializeAges` |
| `update_solution_terminal` | `updateSolutionTerminal` |

### 4.3 Important Note

**ALL code must be made compliant.** Do not skip files as "dead code" or "unused".

---

## 5. Unchanged Between Versions

The following are already correct in HARK 0.14.1 (no changes needed for 0.14.1→0.17.0):

| Item | Status |
|------|--------|
| `.pmv` attribute | Already `.pmv` in 0.14.1 |
| `.atoms` attribute | Already `.atoms` in 0.14.1 |
| `RNG.integers()` | Already `.integers()` in 0.14.1 |
| `DiscreteDistribution(pmv, atoms, ...)` constructor | Unchanged |
| snake_case method names in HARK | Already snake_case in 0.14.1 |

---

## 6. Project Config Files

Files to check for `econ-ark` version pins:

| File Pattern | Update Rule |
|--------------|-------------|
| `requirements*.txt` | `econ-ark==0.14.1` → `econ-ark>=0.17.0` |
| `pyproject.toml` | dependencies section |
| `environment*.yml` | pip or conda section |
| `binder/requirements.txt` | Binder builds |
| `setup.py` | install_requires |

Python version: HARK 0.17.0 requires Python ≥3.10.

---

## 7. Verification Checklist

Before proceeding to transformation:

- [x] All `from HARK.distribution import` found
- [x] All `from HARK.parallel import` found
- [x] All `from HARK.datasets import` found
- [x] Parameter dicts with `aNrmInitMean` traced to model constructors
- [x] Config files with `econ-ark` version pins identified
- [x] **Method REMOVALS documented** (update_solution_terminal)
- [x] **Target codebase scanned for camelCase method definitions**

---

## 8. Confidence Levels

| Change Category | Confidence | Blocking? |
|-----------------|------------|-----------|
| Import path changes | HIGH | No |
| Parameter renames | MEDIUM | No |
| **Method removals** | **HIGH** | **YES** |
| **camelCase method definitions** | **HIGH** | **YES** |
| Config file updates | HIGH | No |
