
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ARKitecture of Econ-ARK &#8212; HARK latest documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/override-nbsphinx-gallery.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=91d07486"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/overview/ARKitecture';</script>
    <link rel="canonical" href="https://docs.econ-ark.org/docs/overview/ARKitecture.html" />
    <link rel="icon" href="../../_static/econ-ark-logo.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="A Gentle Introduction to HARK" href="../../examples/Gentle-Intro/Gentle-Intro-To-HARK.html" />
    <link rel="prev" title="Introduction to HARK" href="introduction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="latest" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/econ-ark-logo.png" class="logo__image only-light" alt="HARK latest documentation - Home"/>
    <img src="../../_static/econ-ark-logo.png" class="logo__image only-dark pst-js-only" alt="HARK latest documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../guides/index.html">
    Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Overview & Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Econ-ARK/HARK" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/econ_ark" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/econ-ark/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://econ-ark.org" title="Econ-ARK" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/econ-ark-logo.png" class="icon-link-image" alt="Econ-ARK"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../guides/index.html">
    Guides
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Overview & Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Econ-ARK/HARK" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/econ_ark" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/econ-ark/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://econ-ark.org" title="Econ-ARK" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/econ-ark-logo.png" class="icon-link-image" alt="Econ-ARK"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to HARK</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to HARK</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ARKitecture of Econ-ARK</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Learning About HARK</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Gentle-Intro-To-HARK.html">A Gentle Introduction to HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Simulation-Intro.html">Simulating Microeconomic Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Cycles-Intro.html">The Nature of Time in HARK’s Microeconomic Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Constructors-Intro.html">Constructed Attributes and Model Defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Advanced-Intro.html">Advanced and Uncommon HARK Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Methods-Intro.html">Numeric Methods Commonly Used in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Model-List.html">Directory of Consumption-Saving Models in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/AgentType-Intro.html">Elements of an AgentType Subclass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Gentle-Intro/Market-Intro.html">Solving for “Macroeconomic” Equilibrium in HARK: the <code class="docutils literal notranslate"><span class="pre">Market</span></code> class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/SequenceSpaceJacobians/SSJ_explanation.html">The Sequence Space Jacobian (SSJ) method</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../examples/SequenceSpaceJacobians/SSJ-tutorial.html">Making Heterogeneous Agent Sequence Space Jacobian Matrices in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/Journeys/Journey-PhD.html">Journey: Economics PhD Student</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">HARK Models</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsIndShockModel/PerfForesightConsumerType.html">Perfect foresight consumption-saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsIndShockModel/IndShockConsumerType.html">Consumption-Saving model with Idiosyncratic Income Shocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsIndShockModel/KinkedRconsumerType.html">Consumption-Saving model with Idiosyncratic Income Shocks and Different Interest Rates on Borrowing and Saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsMarkovModel/MarkovConsumerType.html">Additional parameter value to solve an instance of MarkovConsumerType</a></li>





<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsGenIncProcessModel/GenIncProcessConsumerType.html">Permanent versus Persistent Income Shocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsAggShockModel/AggShockConsumerType.html">Example ConsAggShockModel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsPortfolioModel/PortfolioConsumerType.html">Portfolio Models in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsPortfolioModel/RiskyAssetConsumerType.html">Example Implementations of <code class="docutils literal notranslate"><span class="pre">HARK.ConsumptionSaving.ConsRiskyAssetModel</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsPortfolioModel/SequentialPortfolioConsumerType.html">Consumption-Saving with Portfolio Allocation: Sequential Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsLaborModel/LaborIntMargConsumerType.html">Consumption-Saving with Intensive Margin Labor Supply Choice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsPrefShockModel/PrefShockConsumerType.html">Multiplicative Shocks to Utility</a></li>




<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsHealthModel/BasicHealthConsumerType.html">Basic Health Investment in a Consumption-Saving Model</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsMedModel/MedShockConsumerType.html">Medical Care as a Consumption Good with Stochastic Demand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsMedModel/MedExtMargConsumerType.html">Consumption-Saving with Medical Care Choice on the Extensive Margin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsRepAgentModel/RepAgentConsumerType.html">Representative Agent Consumption-Saving Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/ConsRiskyContribModel/RiskyContribConsumerType.html">“Risky Contribution” Model (UNKNOWN / UNEXPLAINED)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../examples/LifecycleModel/LifecycleModel.html">A Life Cycle Model: The Distribution of Assets By Age</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/SequenceSpaceJacobians/Transition_Matrix_Example.html">Using Transition Matrix Methods under IndShockConsumerType</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/SequenceSpaceJacobians/Jacobian_Example.html">Computing Heterogenous Agent Sequence Space Jacobians in HARK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/SequenceSpaceJacobians/KS-HARK-presentation.html">Solving Krusell Smith Model with HARK and SSJ</a></li>


<li class="toctree-l1"><a class="reference internal" href="../../examples/SequenceSpaceJacobians/HANKFiscal_example.html">HARK and the Sequence Space Jacobian (SSJ) Method</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Overview</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">ARKitecture of Econ-ARK</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="arkitecture-of-econ-ark">
<h1>ARKitecture of Econ-ARK<a class="headerlink" href="#arkitecture-of-econ-ark" title="Link to this heading">#</a></h1>
<p>This document guides you through the structure of Econ-ARK, and explains the main ingredients.
Note that it does not explain <em>how</em> to use it—for this, please follow the example notebooks, which you can find on the left.</p>
<p><a class="reference external" href="https://github.com/econ-ark">Econ-ARK</a> contains the three main repositories <a class="reference external" href="https://github.com/econ-ark/HARK">HARK</a>, <a class="reference external" href="https://github.com/econ-ark/DEMARK">DemARK</a>, and <a class="reference external" href="https://github.com/econ-ark/REMARK">REMARK</a>. On top of that, the <a class="reference external" href="https://econ-ark.org/">website</a> combines all of them. Hence, if you want to find a notebook search them in <a class="reference external" href="https://econ-ark.org/materials">materials</a>.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/econ-ark/HARK">HARK</a>: Includes the source code as well as some example notebooks.</p></li>
<li><p><a class="reference external" href="https://github.com/econ-ark/DemARK">DemARK</a>: Here you can find <em>Dem</em>onstrations of tools, AgentTypes, and ModelClasses.</p></li>
<li><p><a class="reference external" href="https://github.com/econ-ark/REMARK">REMARK</a>: Here you can find <em>R</em>[eplications/eproductions] and <em>E</em>xplorations <em>M</em>ade using <em>ARK</em>.</p></li>
</ul>
<p>Before describing each repository in detail, some preliminary remarks.</p>
<p>HARK is written in Python, an object-oriented programming (OOP) language that is quite popular in the scientific community. A significant reason for the adoption of Python is the <strong><em>numpy</em></strong> and <strong><em>scipy</em></strong> packages, which offer a wide array of mathematical and statistical functions and tools; HARK makes liberal use of these libraries. Python’s object-oriented nature allows models in HARK to be easily extended: new models can inherit functions and methods existing models, eliminating the need to reproduce or repurpose code.</p>
<p>We encourage HARK users to use the <code class="docutils literal notranslate"><span class="pre">conda</span></code> or <code class="docutils literal notranslate"><span class="pre">mamba</span></code> package managers, which include all commonly used mathematical and scientific Python packages.</p>
<p>For users unfamiliar with OOP, we strongly encourage you to review the background material on OOP provided by the good people at <a class="reference external" href="https://python.quantecon.org/intro.html">QuantEcon</a> (for more on them, see below) at this link: <a class="reference external" href="https://python-programming.quantecon.org/oop_intro.html">Object Oriented Programming</a>. Unlike non-OOP languages, OOP bundles together data and functions into <em>objects</em>. These can be accessed via: <strong><em>object_name.data</em></strong> and <strong><em>object_name.method_name()</em></strong>, respectively. For organizational purposes, definitions of multiple objects are stored in <em>modules</em>, which are simply files with a <strong><em>.py</em></strong> extension. Modules can be accessed in Python via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">module_name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">import_name</span>
</pre></div>
</div>
<p>This imports the module and gives it a local name of <strong><em>import_name</em></strong>. We can access a function within this module by simply typing: <strong><em>import_name.function_name()</em></strong>. The following example will illustrate the usage of these commands. <strong><em>CRRAutility</em></strong> is the function object for calculating CRRA utility supplied by the <strong><em>HARK.rewards</em></strong> module. <strong><em>CRRAutility</em></strong> is called <em>attributes</em> of the module <strong><em>HARK.rewards</em></strong>. In order to calculate CRRA utility with a consumption of 1 and a coefficient of risk aversion of 2 we run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">HARK.rewards</span><span class="w"> </span><span class="kn">import</span> <span class="n">CRRAutility</span>

<span class="n">CRRAutility</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Python modules in HARK can generally be categorized into two types: tools and models. <strong>Tool modules</strong> contain functions and classes with general purpose tools that have no inherent ‘’economic content’’, but that can be used in many economic models as building blocks or utilities; they could plausibly be useful in non-economic settings. Tools might include functions for data analysis (e.g. calculating Lorenz shares from data, or constructing a non-parametric kernel regression), functions to create and manipulate discrete approximations to continuous distributions, or classes for constructing interpolated approximations to non-parametric functions. The most commonly used tool modules reside in HARK’s root directory and have names like <strong><em>HARK.distributions</em></strong> and <strong><em>HARK.interpolation</em></strong>.</p>
<p><strong>Model modules</strong> specify particular economic models, including classes to represent agents in the model (and the ‘’market structure’’ in which they interact) and functions for solving the ‘’one period problem’’ of those models. For example, <strong>ConsIndShockModel.py</strong> concerns consumption-saving models in which agents have CRRA utility over consumption and face idiosyncratic shocks to permanent and transitory income. The module includes classes for representing ‘’types’’ of consumers, along with functions for solving (several flavors of) the one period consumption-saving problem. Model modules generally have <strong><em>Model</em></strong> in their name, and the classes for representing agents all have <strong><em>Type</em></strong> at the end of their name (as instances represent a collection of ex ante homogeneous agents who share common model and parameters– a “type”). For example, <strong><em>HARK.ConsumptionSaving.ConsIndShockModel</em></strong> includes the class <strong><em>IndShockConsumerType</em></strong>.</p>
<section id="hark">
<h2>HARK<a class="headerlink" href="#hark" title="Link to this heading">#</a></h2>
<p>After you <a class="reference external" href="https://docs.econ-ark.org/docs/guides/installation.html">installed</a> or <a class="reference external" href="https://github.com/econ-ark/HARK">cloned the repository of</a> HARK, you can explore the content of it. In the subfolder HARK, you can find a range of <a class="reference internal" href="#general-purpose-tools"><span class="std std-ref">general purpose tools</span></a>, as well as the next subfolder ConsumptionSaving which has <a class="reference internal" href="#agenttype-class"><span class="std std-ref">AgentType subclasses</span></a> and <a class="reference internal" href="#market-class"><span class="std std-ref">Market subclasses</span></a>.</p>
<section id="general-purpose-tools">
<h3>General Purpose Tools<a class="headerlink" href="#general-purpose-tools" title="Link to this heading">#</a></h3>
<p>HARK’s root directory contains several tool modules, each containing a variety of functions and classes that can be used in many economic models– or even for mathematical purposes that have nothing to do with economics. Some of the tool modules are very sparely populated, while others are quite large. These modules are continuously being developed and expanded, as there are many numeric tools that are well known and understood, and programming them is usually independent of other “moving parts” in HARK.</p>
<section id="hark-core">
<h4>HARK.core<a class="headerlink" href="#hark-core" title="Link to this heading">#</a></h4>
<p>A key goal of the project is to create modularity and interoperability between models, making them easy to combine, adapt, and extend. To this end, the <strong><em>HARK.core</em></strong> module specifies a framework for economic models in HARK, creating a common structure for them on two levels that can be called ‘’microeconomic’’ and ‘’macroeconomic’’.</p>
<p>Microeconomic models in HARK use the <strong><em>AgentType</em></strong> class to represent agents with an intertemporal optimization problem. Each of these models specifies a subclass of <strong><em>AgentType</em></strong>; an instance of the subclass represents agents who are <em>ex-ante</em> homogeneous– they have common values for all parameters that describe the problem. For example, <strong><em>ConsIndShockModel</em></strong> specifies the <strong><em>IndShockConsumerType</em></strong> class, which has methods specific to consumption-saving models with idiosyncratic shocks to income; an instance of the class might represent all consumers who have a CRRA of 3, discount factor of 0.98, etc. The <strong><em>AgentType</em></strong> class has a <strong><em>solve</em></strong> method that acts as a ‘’universal microeconomic solver’’ for any properly formatted model, making it easier to set up a new model and to combine elements from different models; the solver is intended to encompass any model that can be framed as a sequence of one period problems. For a complete description, see section <a class="reference internal" href="#agenttype-class"><span class="std std-ref">AgentType Class</span></a>.</p>
<p>Macroeconomic models in HARK use the <strong><em>Market</em></strong> class to represent a market (or other aggregator) that combines the actions, states, and/or shocks (generally, outcomes) of individual agents in the model into aggregate outcomes that are ‘’passed back’’ to the agents. For example, the market in a consumption-saving model might combine the individual asset holdings of all agents in the market to generate aggregate capital in the economy, yielding the interest rate on assets (as the marginal product of capital); the individual agents then learn the aggregate capital level and interest rate, conditioning their next action on this information. Objects that microeconomic agents treat as exogenous when solving (or simulating) their model are thus endogenous at the macroeconomic level. Like <strong><em>AgentType</em></strong>, the <strong><em>Market</em></strong> class also has a <strong><em>solve</em></strong> method, which seeks out a dynamic general equilibrium: a ‘’rule’’ governing the dynamic evolution of macroeconomic objects such that if agents believe this rule and act accordingly, then their collective actions generate a sequence of macroeconomic outcomes that justify the belief in that rule. For a more complete description, see section <a class="reference internal" href="#market-class"><span class="std std-ref">Market Class</span></a>.</p>
</section>
<section id="hark-metric">
<h4>HARK.metric<a class="headerlink" href="#hark-metric" title="Link to this heading">#</a></h4>
<p><strong><em>HARK.metric</em></strong> defines a superclass called <strong><em>MetricObject</em></strong> that is used throughout HARK’s tools and models. When solving a dynamic microeconomic model with an infinite horizon (or searching for a dynamic general equilibrium), it is often required to consider whether two solutions are sufficiently close to each other to warrant stopping the process (i.e. approximate convergence). It is thus necessary to calculate the ‘’distance’’ between two solutions, so HARK specifies that classes should have a <strong><em>distance</em></strong> method that takes a single input and returns a non-negative value representing the (generally unitless) distance between the object in question and the input to the method. As a convenient default, <strong><em>MetricObject</em></strong> provides a ‘’universal distance metric’’ that should be useful in many contexts. (Roughly speaking, the universal distance metric is a recursive supnorm, returning the largest distance between two instances, among attributes named in <strong><em>distance_criteria</em></strong>. Those attributes might be complex objects themselves rather than real numbers, generating a recursive call to the universal distance metric.
) When defining a new subclass of <strong><em>MetricObject</em></strong>, the user simply defines the attribute <strong><em>distance_criteria</em></strong> as a list of strings naming the attributes of the class that should be compared when calculating the distance between two instances of that class. For example, the class <strong><em>ConsumerSolution</em></strong> has <strong><em>distance_criteria = [‘cFunc’]</em></strong>, indicating that only the consumption function attribute of the solution matters when comparing the distance between two instances of <strong><em>ConsumerSolution</em></strong>. See <a class="reference external" href="https://docs.econ-ark.org/docs/reference/tools/metric.html">here</a> for further documentation.</p>
</section>
<section id="hark-utilities">
<h4>HARK.utilities<a class="headerlink" href="#hark-utilities" title="Link to this heading">#</a></h4>
<p>The <strong><em>HARK.utilities</em></strong> module contains a variety of general purpose tools, including some data manipulation tools (e.g. for calculating an average of data conditional on being within a percentile range of different data), basic kernel regression tools, convenience functions for retrieving information about functions, and basic plotting tools using <strong><em>matplotlib.pyplot</em></strong>. See <a class="reference external" href="https://docs.econ-ark.org/docs/reference/tools/utilities.html">here</a> for further documentation.</p>
</section>
<section id="hark-distributions">
<h4>HARK.distributions<a class="headerlink" href="#hark-distributions" title="Link to this heading">#</a></h4>
<p>The <strong><em>HARK.distributions</em></strong> module includes classes for representing continuous distributions in a relatively consistent framework. Critically for numeric purposes, it also has methods and functions for constructing discrete approximations to those distributions (e.g. <strong><em>approx_lognormal()</em></strong> to approximate a log-normal distribution) as well as manipulating these representations (e.g. appending one outcome to an existing distribution, or combining independent univariate distributions into one multivariate distribution). As a convention in HARK, continuous distributions are approximated as finite discrete distributions when solving models. This both simplifies solution methods (reducing numeric integrals to simple dot products) and allows users to easily test whether their chosen degree of discretization yields a sufficient approximation to the full distribution. See <a class="reference external" href="https://docs.econ-ark.org/docs/reference/tools/distribution.html">here</a> for further documentation.</p>
</section>
<section id="hark-interpolation">
<h4>HARK.interpolation<a class="headerlink" href="#hark-interpolation" title="Link to this heading">#</a></h4>
<p>The <strong><em>HARK.interpolation</em></strong> module defines classes for representing interpolated function approximations. Interpolation methods in HARK all inherit from a superclass such as <strong><em>HARKinterpolator1D</em></strong> or <strong><em>HARKinterpolator2D</em></strong>, wrapper classes that ensures interoperability across interpolation methods. For example, <strong><em>HARKinterpolator1D</em></strong> specifies the methods <strong>_<strong>call</strong>_</strong> and <strong><em>derivative</em></strong> to accept an arbitrary array as an input and return an identically shaped array with the interpolated function evaluated at the values in the array or its first derivative, respectively. However, these methods do little on their own, merely reshaping arrays and referring to the <strong><em>_evaluate</em></strong> and <strong><em>_der</em></strong> methods, which are <em>not actually defined in</em> <strong><em>HARKinterpolator1D</em></strong>. Each subclass of <strong><em>HARKinterpolator1D</em></strong> specifies their own implementation of <strong><em>_evaluate</em></strong> and <strong><em>_der</em></strong> particular to that interpolation method, accepting and returning only 1D arrays. In this way, subclasses of <strong><em>HARKinterpolator1D</em></strong> are easily interchangeable with each other, as all methods that the user interacts with are identical, varying only by ‘’internal’’ methods.</p>
<p>When evaluating a stopping criterion for an infinite horizon problem, it is often necessary to know the ‘’distance’’ between functions generated by successive iterations of a solution procedure. To this end, each interpolator class in HARK must define a <strong><em>distance</em></strong> method that takes as an input another instance of the same class and returns a non-negative real number representing the ‘’distance’’ between the two. As each of the <strong><em>HARKinterpolatorXD</em></strong> classes inherits from <strong><em>MetricObject</em></strong>, all interpolator classes have the default ‘’universal’’ distance method; the user must simply list the names of the relevant attributes in the attribute <strong><em>distance_criteria</em></strong> of the class.</p>
<p>Interpolation methods currently implemented in HARK include (multi)linear interpolation up to 4D, 1D cubic spline interpolation, (multi)linear interpolation over 1D interpolations (up to 4D total), (multi)linear interpolation over 2D interpolations (up to 4D total), linear interpolation over 3D interpolations, 2D curvilinear interpolation over irregular grids, interpolors for representing functions whose domain lower bound in one dimension depends on the other domain values, and 1D lower/upper envelope interpolators. See <a class="reference external" href="https://docs.econ-ark.org/docs/reference/tools/interpolation.html">here</a> for further documentation.</p>
</section>
<section id="hark-estimation">
<h4>HARK.estimation<a class="headerlink" href="#hark-estimation" title="Link to this heading">#</a></h4>
<p>Functions for optimizing an objective function for the purposes of estimating a model can be found in <strong><em>HARK.estimation</em></strong>. As of this writing, the implementation includes only minimization by the Nelder-Mead simplex method, minimization by a derivative-free Powell method variant, and two small tools for resampling data (i.e. for a bootstrap); the minimizers are merely convenience wrappers (with result reporting) for optimizers included in <strong><em>scipy.optimize</em></strong>. The module also has functions for a parallel implementation of the Nelder-Mead simplex algorithm, as described in Wiswall and Lee (2011). Future functionality will include more robust global search methods, including genetic algorithms, simulated annealing, and differential evolution. See <a class="reference external" href="https://docs.econ-ark.org/docs/reference/tools/estimation.html">here</a> for full documentation.</p>
</section>
<section id="hark-parallel">
<h4>HARK.parallel<a class="headerlink" href="#hark-parallel" title="Link to this heading">#</a></h4>
<p>By default, processes in Python are single-threaded, using only a single CPU core. The <strong><em>HARK.parallel</em></strong> module provides basic tools for using multiple CPU cores simultaneously, with minimal effort. In particular, it provides the function <strong><em>multi_thread_commands</em></strong>, which takes two arguments: a list of <strong><em>AgentType</em></strong> s and a list of commands as strings; each command should be a method of the <strong><em>AgentType</em></strong> s. The function simply distributes the <strong><em>AgentType</em></strong> s across threads on different cores and executes each command in order, returning no output (the <strong><em>AgentType</em></strong> s themselves are changed by running the commands). Equivalent results would be achieved by simply looping over each type and running each method in the list. Indeed, <strong><em>HARK.parallel</em></strong> also has a function called <strong><em>multi_thread_commands_fake</em></strong> that does just that, with identical syntax to <strong><em>multi_thread</em>\commands_</strong>. Multithreading in HARK can thus be easily turned on and off. See <a class="reference external" href="https://docs.econ-ark.org/docs/reference/tools/parallel.html">here</a> for full documentation.</p>
</section>
<section id="hark-rewards">
<h4>HARK.rewards<a class="headerlink" href="#hark-rewards" title="Link to this heading">#</a></h4>
<p>The <strong><em>HARK.rewards</em></strong> module has a variety of functions and classes for representing commonly used utility (or reward) functions, along with their derivatives and inverses.</p>
</section>
</section>
<section id="agenttype-class">
<h3>AgentType Class<a class="headerlink" href="#agenttype-class" title="Link to this heading">#</a></h3>
<p>The core of our microeconomic dynamic optimization framework is a flexible object-oriented representation of economic agents. The <strong><em>HARK.core</em></strong> module defines a superclass called <strong><em>AgentType</em></strong>; each model defines a subclass of <strong><em>AgentType</em></strong>, specifying additional model-specific features and methods while inheriting the methods of the superclass. Most importantly, the method <strong><em>solve</em></strong> acts as a ‘’universal solver’’ applicable to any (properly formatted) discrete time model. This section describes the format of an instance of <strong><em>AgentType</em></strong> as it defines a dynamic microeconomic problem. Note that each instance of <strong><em>AgentType</em></strong> represents an <em>ex-ante</em> heterogeneous ‘’type’’ of agent; <em>ex-post</em> heterogeneity is achieved by simulating many agents of the same type, each of whom receives a unique sequence of shocks.</p>
<section id="attributes-of-an-agenttype">
<h4>Attributes of an AgentType<a class="headerlink" href="#attributes-of-an-agenttype" title="Link to this heading">#</a></h4>
<p>A discrete time model in our framework is characterized by a sequence of ‘’periods’’ that the agent will experience. A well-formed instance of <strong><em>AgentType</em></strong> includes the following attributes:</p>
<ul class="simple">
<li><p><strong><em>solve_one_period</em></strong>: A function representing the solution method for a single period of the agent’s problem. The inputs passed to a <strong><em>solveOnePeriod</em></strong> function include all data that characterize the agent’s problem in that period, including the solution to the subsequent period’s problem (designated as <strong><em>solution_next</em></strong>). The output of these functions is a single <strong><em>Solution</em></strong> object, which can be passed to the solver for the previous period.</p></li>
<li><p><strong><em>time_inv</em></strong>: A list of strings containing all of the variable names that are passed to at least one function in <strong><em>solveOnePeriod</em></strong> but do <em>not</em> vary across periods. Each of these variables resides in a correspondingly named attribute of the <strong><em>AgentType</em></strong> instance.</p></li>
<li><p><strong><em>time_vary</em></strong>: A list of strings naming the attributes of this instance that vary across periods. Each of these attributes is a list of period-specific values, which should be of the same length.</p></li>
<li><p><strong><em>solution_terminal</em></strong>: An object representing the solution to the ‘’terminal’’ period of the model. This might represent a known trivial solution that does not require numeric methods, the solution to some previously solved ‘’next phase’’ of the model, a scrap value function, or an initial guess of the solution to an infinite horizon model.</p></li>
<li><p><strong><em>pseudo_terminal</em></strong>: A Boolean flag indicating that <strong><em>solution_terminal</em></strong> is not a proper terminal period solution (rather an initial guess, ‘’next phase’’ solution, or scrap value) and should not be reported as part of the model’s solution.</p></li>
<li><p><strong><em>cycles</em></strong>: A non-negative integer indicating the number of times the agent will experience the sequence of periods in the problem. For example, <strong><em>cycles = 1</em></strong> means that the sequence of periods is analogous to a lifecycle model, experienced once from beginning to end. An infinite horizon problem in which the sequence of periods repeats indefinitely is indicated with <strong><em>cycles = 0</em></strong>. For any <strong><em>cycles &gt; 1</em></strong>, the agent experiences the sequence N times, with the first period in the sequence following the last; this structure is uncommon, and almost all applications with use a lifecycle or infinite horizon format.</p></li>
<li><p><strong><em>T_cycle</em></strong>: The number of periods in one cycle. Lists of time-varying parameters must have this length, and the solution will contain <code class="docutils literal notranslate"><span class="pre">T_cycle</span></code> elements. Each agent tracks its position within the cycle using <code class="docutils literal notranslate"><span class="pre">t_cycle</span></code>, which resets to zero after reaching <code class="docutils literal notranslate"><span class="pre">T_cycle</span></code>.</p></li>
<li><p><strong><em>T_age</em></strong>: Optional maximum lifespan for simulated agents. Each agent’s age is counted in <code class="docutils literal notranslate"><span class="pre">t_age</span></code>; when <code class="docutils literal notranslate"><span class="pre">t_age</span></code> reaches <code class="docutils literal notranslate"><span class="pre">T_age</span></code> the agent is replaced with a newborn.</p></li>
<li><p><strong><em>tolerance</em></strong>: A positive real number indicating convergence tolerance, representing the maximum acceptable ‘’distance’’ between successive cycle solutions in an infinite horizon model; it is irrelevant when <strong><em>cycles &gt; 0</em></strong>. As the distance metric on the space of solutions is model-specific, the value of <strong><em>tolerance</em></strong> is generally dimensionless.</p></li>
</ul>
<p>An instance of <strong><em>AgentType</em></strong> also has the attributes named in <strong><em>time_vary</em></strong> and <strong><em>time_inv</em></strong>, and may have other attributes that are not included in either (e.g. values not used in the model solution, but instead to construct objects used in the solution). Note that <strong><em>time_vary</em></strong> may include attributes that are never used by a function in <strong><em>solveOnePeriod</em></strong>. Most saliently, the attribute <strong><em>solution</em></strong> is time-varying but is not used to solve individual periods.</p>
</section>
<section id="a-universal-solver">
<h4>A Universal Solver<a class="headerlink" href="#a-universal-solver" title="Link to this heading">#</a></h4>
<p>When an instance of <strong><em>AgentType</em></strong> invokes its <strong><em>solve</em></strong> method, the solution to the agent’s problem is stored in the attribute <strong><em>solution</em></strong>. The solution is computed by recursively solving the sequence of periods defined by the variables listed in <strong><em>time_vary</em></strong> and <strong><em>time_inv</em></strong> using the functions in <strong><em>solve_one_period</em></strong>. The time-varying inputs are updated each period, including the successive period’s solution as <strong><em>solution_next</em></strong>; the same values of time invariant inputs in <strong><em>time_inv</em></strong> are passed to the solver in every period. The first call to <strong><em>solve_one_period</em></strong> uses <strong><em>solution_terminal</em></strong> as <strong><em>solution_next</em></strong>. In an infinite horizon problem (<strong><em>cycles</em>=0</strong>), the sequence of periods is solved until the solutions of successive cycles have a ‘’distance’’ of less than <strong><em>tolerance</em></strong>. Usually, the “sequence” of periods in such models is just <em>one</em> period long.</p>
<p>The output from a function in <strong><em>solve_one_period</em></strong> is an instance of a model-specific solution class. The attributes of a solution to one period of a problem might include behavioral functions, (marginal) value functions, and other variables characterizing the result. Each solution class must have a method called <strong><em>distance()</em></strong>, which returns the ‘’distance’’ between itself and another instance of the same solution class, so as to define convergence as a stopping criterion; for many models, this will be the ‘’distance’’ between a policy or value function in the solutions. If the solution class is defined as a subclass of <strong><em>MetricObject</em></strong>, it automatically inherits the default <strong><em>distance</em></strong> method, so that the user must only list the relevant object attributes in <strong><em>distance_criteria</em></strong>.</p>
<p>The <strong><em>AgentType</em></strong> also has methods named <strong><em>pre_solve</em></strong> and <strong><em>post_solve</em></strong>, both of which take no arguments and do absolutely nothing. A subclass of <strong><em>AgentType</em></strong> can overwrite these blank methods with its own model specific methods. <strong><em>pre_solve</em></strong> is automatically called near the beginning of the <strong><em>solve</em></strong> method, before solving the sequence of periods. It is used for specifying tasks that should be done before solving the sequence of periods, such as pre-constructing some objects repeatedly used by the solution method or finding an analytical terminal period solution. For example, the <strong><em>IndShockConsumerType</em></strong> class in <strong><em>ConsIndShockModel</em></strong> has a <strong><em>pre_solve</em></strong> method that calls its <strong><em>update_solution_terminal</em></strong> method to ensure that <strong><em>solution_terminal</em></strong> is consistent with the model parameters. The <strong><em>post_solve</em></strong> method is called shortly after the sequence of periods is fully solved; it can be used for ‘’post-processing’’ of the solution or performing a step that is only useful after solution convergence. For example, the <strong><em>TractableConsumerType</em></strong> in <strong><em>TractableBufferStockModel</em></strong> has a <strong><em>post_solve</em></strong> method that constructs an interpolated consumption function from the list of stable arm points found during solution.</p>
<p>Our universal solver is written in a very general way that should be applicable to any discrete time optimization problem– because Python is so flexible in defining objects, the time-varying inputs for each period can take any form. Indeed, the solver does no ‘’real work’’ itself, but merely provides a structure for describing models in the HARK framework, allowing interoperability among current and future modules.</p>
<p>The base <strong><em>AgentType</em></strong> is sparsely defined, as most ‘’real’’ methods will be application-specific. One method of note, however, is <strong><em>reset_rng</em></strong>, which simply resets the <strong><em>AgentType</em></strong>’s random number generator (as the attribute <strong><em>RNG</em></strong>) using the value in the attribute <strong><em>seed</em></strong>. (Every instance of <strong><em>AgentType</em></strong> is created with a random number generator as an instance of the class <strong><em>numpy.random.RandomState</em></strong>, with a default <strong><em>seed</em></strong> of zero.) This method is useful for (<em>inter alia</em>) ensuring that the same underlying sequence of shocks is used for every simulation run when a model is solved or estimated.</p>
</section>
</section>
<section id="market-class">
<h3>Market Class<a class="headerlink" href="#market-class" title="Link to this heading">#</a></h3>
<p>The modeling framework of <strong><em>AgentType</em></strong> is deemed ‘’microeconomic’’ because it pertains only to the dynamic optimization problem of agents, treating all inputs of the problem as exogenously fixed. In what we label as ‘’macroeconomic’’ models, some of the inputs for the microeconomic models are endogenously determined by the collective states and controls of agents in the model. In a dynamic general equilibrium, there must be consistency between agents’ beliefs about these macroeconomic objects, their individual behavior, and the realizations of the macroeconomic objects that result from individual choices.</p>
<p>The <strong><em>Market</em></strong> class in <strong><em>HARK.core</em></strong> provides a framework for such macroeconomic models, with a <strong><em>solve</em></strong> method that searches for a dynamic general equilibrium. An instance of <strong><em>Market</em></strong> includes a list of <strong><em>AgentType</em></strong> s that compose the economy, a method for transforming microeconomic outcomes (states, controls, and/or shocks) into macroeconomic outcomes, and a method for interpreting a history or sequence of macroeconomic outcomes into a new ‘’dynamic rule’’ for agents to believe. Agents treat the dynamic rule as an input to their microeconomic problem, conditioning their optimal policy functions on it. A dynamic general equilibrium is a fixed point dynamic rule: when agents act optimally while believing the equilibrium rule, their individual actions generate a macroeconomic history consistent with the equilibrium rule.</p>
<section id="down-on-the-farm">
<h4>Down on the Farm<a class="headerlink" href="#down-on-the-farm" title="Link to this heading">#</a></h4>
<p>The <strong><em>Market</em></strong> class uses a farming metaphor to conceptualize the process for generating a history of macroeconomic outcomes in a model. Suppose all <strong><em>AgentTypes</em></strong> in the economy believe in some dynamic rule (i.e. the rule is stored as attributes of each <strong><em>AgentType</em></strong>, which directly or indirectly enters their dynamic optimization problem), and that they have each found the solution to their microeconomic model using their <strong><em>solve</em></strong> method. Further, the macroeconomic and microeconomic states have been reset to some initial orientation.</p>
<p>To generate a history of macroeconomic outcomes, the <strong><em>Market</em></strong> repeatedly loops over the following steps a set number of times:</p>
<ul class="simple">
<li><p><strong><em>sow</em></strong>: Distribute the macroeconomic state variables to all <strong><em>AgentType</em></strong> s in the market.</p></li>
<li><p><strong><em>cultivate</em></strong>: Each <strong><em>AgentType</em></strong> executes their <strong><em>market_action</em></strong> method, likely corresponding to simulating one period of the microeconomic model.</p></li>
<li><p><strong><em>reap</em></strong>: Microeconomic outcomes are gathered from each <strong><em>AgentType</em></strong> in the market.</p></li>
<li><p><strong><em>mill</em></strong>: Data gathered by <strong><em>reap</em></strong> is processed into new macroeconomic states according to some ‘’aggregate market process’’.</p></li>
<li><p><strong><em>store</em></strong>: Relevant macroeconomic states are added to a running history of outcomes.</p></li>
</ul>
<p>This procedure is conducted by the <strong><em>make_history</em></strong> method of <strong><em>Market</em></strong> as a subroutine of its <strong><em>solve</em></strong> method. After making histories of the relevant macroeconomic variables, the market then executes its <strong><em>calc_dynamics</em></strong> function with the macroeconomic history as inputs, generating a new dynamic rule to distribute to the **<em>AgentType</em>**s in the market. The process then begins again, with the agents solving their updated microeconomic models given the new dynamic rule; the <strong><em>solve</em></strong> loop continues until the ‘’distance’’ between successive dynamic rules is sufficiently small.</p>
</section>
<section id="attributes-of-a-market">
<h4>Attributes of a Market<a class="headerlink" href="#attributes-of-a-market" title="Link to this heading">#</a></h4>
<p>To specify a complete instance of <strong><em>Market</em></strong>, the user should give it the following attributes:</p>
<ul class="simple">
<li><p><strong><em>agents</em></strong>: A list of **<em>AgentType</em>**s, representing the agents in the market. Each element in <strong><em>agents</em></strong> represents an <em>ex-ante</em> heterogeneous type; each type could have many <em>ex-post</em> heterogeneous agents.</p></li>
<li><p><strong><em>sow_vars</em></strong>: A list of strings naming variables that are output from the aggregate market process, representing the macroeconomic outcomes. These variables will be distributed to the <strong><em>agents</em></strong> in the <strong><em>sow</em></strong> step.</p></li>
<li><p><strong><em>reap_vars</em></strong>: A list of strings naming variables to be collected from the <strong><em>agents</em></strong> in the <strong><em>reap</em></strong> step, to be used as inputs for the aggregate market process.</p></li>
<li><p><strong><em>const_vars</em></strong>: A list of strings naming variables used by the aggregate market process that <em>do not</em> come from <strong><em>agents</em></strong>; they are constant or come from the <strong><em>Market</em></strong> itself.</p></li>
<li><p><strong><em>track_vars</em></strong>: A list of strings naming variables generated by the aggregate market process that should be tracked as a history, to be used when calculating a new dynamic rule. Usually a subset of <strong><em>sow_vars</em></strong>.</p></li>
<li><p><strong><em>dyn_vars</em></strong>: A list of strings naming the variables that constitute a dynamic rule. These will be stored as attributes of the <strong><em>agents</em></strong> whenever a new rule is calculated.</p></li>
<li><p><strong><em>mill_rule</em></strong>: A function for the ‘’aggregate market process’’, transforming microeconomic outcomes into macroeconomic outcomes. Its inputs are named in <strong><em>reap_vars</em></strong> and <strong><em>const_vars</em></strong>, and it returns a single object with attributes named in <strong><em>sow_vars</em></strong> and/or <strong><em>track_vars</em></strong>. Can be defined as a method of a subclass of <strong><em>Market</em></strong>.</p></li>
<li><p><strong><em>calc_dynamics</em></strong>: A function that generates a new dynamic rule from a history of macroeconomic outcomes. Its inputs are named in <strong><em>track_vars</em></strong>, and it returns a single object with attributes named in <strong><em>dyn_vars</em></strong>.</p></li>
<li><p><strong><em>act_T</em></strong>: The number of times that the <strong><em>make_history</em></strong> method should execute the ‘’farming loop’’ when generating a new macroeconomic history.</p></li>
<li><p><strong><em>tolerance</em></strong>: The minimum acceptable ‘’distance’’ between successive dynamic rules produced by <strong><em>calc_dynamics</em></strong> to constitute a sufficiently converged solution.</p></li>
</ul>
<p>Further, each <strong><em>AgentType</em></strong> in <strong><em>agents</em></strong> must have two methods not necessary for microeconomic models; neither takes any input (except <strong><em>self</em></strong>):</p>
<ul class="simple">
<li><p><strong><em>market_action</em></strong>: The microeconomic process to be run in the <strong><em>cultivate</em></strong> step. Likely uses the new macroeconomic outcomes named in <strong><em>sow_vars</em></strong>; should store new values of relevant microeconomic outcomes in the attributes (of <strong><em>self</em></strong>) named in <strong><em>reap_vars</em></strong>.</p></li>
<li><p><strong><em>reset</em></strong>: Reset, initialize, or prepare for a new ‘’farming loop’’ to generate a macroeconomic history. Might reset its internal random number generator, set initial state variables, clear personal histories, etc.</p></li>
</ul>
<p>When solving macroeconomic models in HARK, the user should also define classes to represent the output from the aggregate market process in <strong><em>mill_rule</em></strong> and for the model-specific dynamic rule. The latter should have a <strong><em>distance</em></strong> method to test for solution convergence; if the class inherits from <strong><em>MetricObject</em></strong>, the user need only list relevant attributes in <strong><em>distance_criteria</em></strong>. For some purposes, it might be useful to specify a subclass of <strong><em>Market</em></strong>, defining <strong><em>millRule</em></strong> and/or <strong><em>calcDynamics</em></strong> as methods rather than functions.</p>
</section>
</section>
</section>
<section id="demark">
<h2>DemARK<a class="headerlink" href="#demark" title="Link to this heading">#</a></h2>
<p>If you want to get a feeling for how the code works and what you can do with it, check out the DemARK <a class="reference external" href="https://github.com/econ-ark/DEMARK">repository</a> which contains many useful demonstrations of tools, AgentTypes, and ModelClasses.</p>
<p>If you want to run the notebooks on your own machine make sure to install the necessary packages described in the readme file. Afterwards you can dive in the notebook folder. Each example has a markdown (.md) version with explanatory notes. The notebook (.ipynb) describes the method and runs (part of the) code.</p>
</section>
<section id="remark">
<h2>REMARK<a class="headerlink" href="#remark" title="Link to this heading">#</a></h2>
<p>HARK can be used to replicate papers as well. For this purpose the <em>R</em>[eplications/eproductions] and <em>E</em>xplorations <em>M</em>ade using <em>ARK</em> (REMARK) <a class="reference external" href="https://github.com/econ-ark/REMARK">repository</a> was created.</p>
<p>Each replication consists of a <em>metadata file</em> (.md) with an overview, a <em>notebook</em> which replicates the paper, and a <em>requirement.txt</em> file with the necessary packages to run the notebooks on your local mashine.</p>
<section id="additional-examples-and-tutorials">
<h3>Additional Examples and Tutorials<a class="headerlink" href="#additional-examples-and-tutorials" title="Link to this heading">#</a></h3>
<p>To help users understand the structure and organization of the repository, we have added more detailed explanations and examples in the following sections:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/econ-ark/HARK">HARK</a>: Includes the source code as well as some example notebooks.</p></li>
<li><p><a class="reference external" href="https://github.com/econ-ark/DemARK">DemARK</a>: Here you can find <em>Dem</em>onstrations of tools, AgentTypes, and ModelClasses.</p></li>
<li><p><a class="reference external" href="https://github.com/econ-ark/REMARK">REMARK</a>: Here you can find <em>R</em>[eplications/eproductions] and <em>E</em>xplorations <em>M</em>ade using <em>ARK</em>.</p></li>
</ul>
<p>For more detailed explanations and examples, please refer to the <a class="reference external" href="https://docs.econ-ark.org/">HARK documentation</a>.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="introduction.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to HARK</p>
      </div>
    </a>
    <a class="right-next"
       href="../../examples/Gentle-Intro/Gentle-Intro-To-HARK.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">A Gentle Introduction to HARK</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hark">HARK</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-purpose-tools">General Purpose Tools</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-core">HARK.core</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-metric">HARK.metric</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-utilities">HARK.utilities</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-distributions">HARK.distributions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-interpolation">HARK.interpolation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-estimation">HARK.estimation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-parallel">HARK.parallel</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hark-rewards">HARK.rewards</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#agenttype-class">AgentType Class</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#attributes-of-an-agenttype">Attributes of an AgentType</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#a-universal-solver">A Universal Solver</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#market-class">Market Class</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#down-on-the-farm">Down on the Farm</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#attributes-of-a-market">Attributes of a Market</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#demark">DemARK</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remark">REMARK</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-examples-and-tutorials">Additional Examples and Tutorials</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Econ-ARK team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>